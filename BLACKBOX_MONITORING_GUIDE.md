# Blackbox Exporter Monitoring Guide

## Overview
This guide explains how to use the Blackbox Exporter to monitor network connectivity, HTTP(S) endpoints, and SSL certificates in your monitoring stack. All configuration is GUI-first except for adding probe targets in `blackbox.yml`.

---

## 1. What is Blackbox Exporter?
- Monitors network endpoints (ping, HTTP, HTTPS, TCP, DNS)
- Checks uptime, latency, SSL certificate expiration, and more
- Integrates with Prometheus and Grafana dashboards

---

## 2. Configure Probe Targets

### Edit Probe Targets
- Open `config/blackbox/blackbox.yml`
- Add endpoints to monitor (examples below):

```yaml
modules:
  http_2xx:
    prober: http
    timeout: 5s
    http:
      valid_http_versions: ["HTTP/1.1", "HTTP/2"]
      method: GET
      tls_config:
        insecure_skip_verify: true
      fail_if_ssl: false
      fail_if_not_ssl: false

  icmp:
    prober: icmp
    timeout: 3s

# Example Prometheus scrape config (in prometheus.yml)
scrape_configs:
  - job_name: 'blackbox-http'
    metrics_path: /probe
    params:
      module: [http_2xx]
    static_configs:
      - targets:
        - https://10.20.10.1 # FortiGate web
        - https://10.20.10.11 # Proxmox node
        - https://8.8.8.8 # Google DNS
    relabel_configs:
      - source_labels: [__address__]
        target_label: __param_target
      - source_labels: [__param_target]
        target_label: instance
      - target_label: __address__
        replacement: blackbox-exporter:9115
```

- Restart the stack: `docker-compose restart blackbox-exporter prometheus`

---

## 3. Import Blackbox Dashboards in Grafana
1. Open Grafana: `http://<monitoring-server>:3000`
2. Login: `admin/admin123`
3. Go to **+ (Plus)** â†’ **Import**
4. Upload or paste Blackbox dashboard JSON (see `dashboards/`)
5. Select Prometheus as the data source
6. View endpoint status, latency, and SSL info

---

## 4. Troubleshooting
- **No Data?**
  - Check endpoint URLs/IPs in `blackbox.yml` and `prometheus.yml`
  - Test with: `curl http://localhost:9115/probe?target=https://8.8.8.8&module=http_2xx`
  - Check Prometheus targets: `http://<monitoring-server>:9090/targets`
- **SSL Errors?**
  - Set `insecure_skip_verify: true` for self-signed certs
- **Grafana Issues?**
  - Verify dashboard data source is Prometheus

---

## 5. Security Notes
- Only monitor trusted endpoints
- Avoid exposing Blackbox Exporter to public networks

---

## Summary
- Blackbox Exporter enables network and endpoint monitoring in your dashboards
- All configuration is GUI-first except for adding probe targets
- For more endpoints, repeat the target addition steps

---

*Generated by GitHub Copilot - Blackbox monitoring made easy!*
