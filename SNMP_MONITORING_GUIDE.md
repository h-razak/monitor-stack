# SNMP Monitoring Setup Guide (FortiGate & Network Devices)

## Overview
This guide explains how to enable SNMP monitoring for your FortiGate firewall and other SNMP-capable devices using the monitoring stack. SNMP metrics are collected by the SNMP Exporter and visualized in Grafana.

---

## 1. Enable SNMP on FortiGate Firewall

### Step-by-Step (GUI)
1. **Login to FortiGate Web Interface**
   - URL: `https://<fortigate-ip>`
   - Login with admin credentials
2. **Go to**: `System` → `SNMP`
3. **Add SNMP Community**
   - Click `Create New`
   - Set a name (e.g., `monitoring`)
   - Set community string (e.g., `public` or a secure value)
   - Set allowed hosts: Enter your monitoring server IP
   - Enable SNMP v2c (recommended)
   - Save
4. **Apply and Confirm**
   - Ensure SNMP is enabled and the community is active
   - Optionally, test with: `snmpwalk -v2c -c <community> <fortigate-ip>`

---

## 2. Configure SNMP Exporter

### Edit SNMP Targets
- Open `config/snmp/snmp.yml`
- Add your FortiGate and other SNMP devices:

```yaml
modules:
  fortigate:
    walk:
      - 1.3.6.1.2.1.1 # System
      - 1.3.6.1.2.1.2 # Interfaces
    version: 2
    auth:
      community: "public" # Use your actual community string

# Example target
scrape_configs:
  - job_name: 'fortigate'
    static_configs:
      - targets: ['10.20.10.1'] # FortiGate IP
    metrics_path: /snmp
    params:
      module: [fortigate]
```

- Restart the stack: `docker-compose restart snmp-exporter prometheus`

---

## 3. Import SNMP Dashboards in Grafana
1. Open Grafana: `http://<monitoring-server>:3000`
2. Login: `admin/admin123`
3. Go to **+ (Plus)** → **Import**
4. Upload or paste SNMP dashboard JSON (see `dashboards/`)
5. Select Prometheus as the data source
6. View SNMP metrics for FortiGate and other devices

---

## 4. Troubleshooting
- **No Data?**
  - Check SNMP community string and allowed hosts
  - Test with: `snmpwalk -v2c -c <community> <fortigate-ip>`
  - Check Prometheus targets: `http://<monitoring-server>:9090/targets`
- **Firewall Issues?**
  - Ensure UDP port 161 is open between monitoring server and FortiGate
- **Grafana Issues?**
  - Verify dashboard data source is Prometheus

---

## 5. Security Notes
- Use a strong SNMP community string
- Restrict allowed hosts to your monitoring server
- Disable SNMP write access

---

## Summary
- SNMP monitoring enables network and firewall metrics in your dashboards
- All configuration is GUI-first except for adding targets in `snmp.yml`
- For more devices, repeat the target addition steps

---

*Generated by GitHub Copilot - SNMP monitoring made easy!*
